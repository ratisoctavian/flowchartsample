<div class="d-flex w-100 h-100">

  <!-- configuration -->
  <app-sidebar [defaultState]="false">
    <div class="d-flex flex-column py-4 px-4">
        <span class="config-title">Configuration</span>

        <section class="d-flex flex-column justify-content-center pt-4">
          <span class="pt-4">Step Gap</span>
          <mat-slider min="30" max="100" step="20" [value] ="options.stepGap" (valueChange)="onOptionChanged('stepGap', $event)" class="pt-0"></mat-slider>
        </section>

        <section class="d-flex flex-column justify-content-center pt-4">
          <mat-checkbox
              [checked]="options.isSequential"
              (change)="options.isSequential = $event.checked; onOptionChanged('isSequential', $event.checked)">
               Sequential
          </mat-checkbox>
          <mat-checkbox class="pt-1"
              [checked]="disabled"
              (change)="disabled = $event.checked">
              Disabled
          </mat-checkbox>
        </section>

        <section class="d-flex flex-column justify-content-center pt-4">
          <span class="pb-2">Zoom</span>
          <mat-radio-group aria-label="Zoom" class="d-flex flex-column" [value]="options.zoom.mode">
            <mat-radio-button *ngFor="let value of ['Disabled','Wheel','Manual']"
                 [value]="value.toUpperCase()" (change)="onOptionChanged('zoom.mode', value.toUpperCase())" class="pb-1">{{value}}
            </mat-radio-button>
          </mat-radio-group>
          <mat-slider [disabled]="options.zoom.mode != 'MANUAL'"  min="0.1" max="1" step="0.1" [value] = "zoomValue"  (valueChange)="onZoomChanged($event)" class="pt-0"></mat-slider>
        </section>

        <section class="d-flex flex-column justify-content-center pt-4">
          <span class="pb-2">Root position</span>
          <mat-radio-group class="d-flex flex-column" [value]="options.rootPosition">
            <mat-radio-button *ngFor="let value of ['Top_center','Center','Free']"
                 [value]="value.toUpperCase()" (change)="onOptionChanged('rootPosition', value.toUpperCase())" class="pb-1">{{value}}
            </mat-radio-button>
          </mat-radio-group>
        </section>

    </div>
 </app-sidebar>

  <div class=" d-flex flex-fill">
     <!-- toolbox -->
    <div class="toolbox p-1 d-flex flex-column justify-content-between">
      <section>
        <div class="toolbox-item d-flex"
          *ngFor="let item of items"
          [ngFlowchartStep]="{
            template: item.template || normalStepTemplate,
            type: item.type,
            data: item.data
          }">
          <div class="item-left"></div>
          <div class="d-flex pe-4 py-3" style="margin-left: -30px">
            <mat-icon [style.color]="item.data.color">{{item.data.icon}}</mat-icon>
            <span class="flex-fill ps-3">{{ item.data.title }}</span>
          </div>
        </div>
      </section>

      <div class="pb-4">
        <button mat-button mat-stroked-button color="primary" class="me-1" (click)="showFlowData()">Show JSON</button>
        <button mat-button mat-stroked-button color="accent" class="ms-1" (click)="clearData()">Clear Flow</button>
      </div>

    </div>
    <!-- canvas -->
    <div class="canvas flex-fill" id="canvas" ngFlowchartCanvas [ngFlowchartOptions]="options" [disabled]="disabled"></div>
    <!-- node properties -->
    <div class="toolbox p-1 d-flex flex-column justify-content-between">
      <div class="d-flex flex-column py-4 px-4">
        <span class="config-title">Properties</span>
        <span class="mt-2">{{selectedStep?.data.title }}</span>
      </div>
    </div>
  </div>

</div>

 <!-- normal step template -->
 <ng-template #normalStepTemplate let-item>
  <div class="card"  [style.border-color]="item.data.color" [attr.name]="item.data.title" (click)="onClick(item.id)">
    <span [style.color]="item.data.color" >{{ item.data.title }}</span>
  </div>
</ng-template>
